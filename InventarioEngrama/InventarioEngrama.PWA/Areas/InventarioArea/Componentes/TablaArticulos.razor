@using InventarioEngrama.PWA.Shared.Common
@using InventarioEngrama.Share.Objetos.Inventario
@inherits EngramaComponent


<MudTable Items="@Data.LstArticulos"
		  T="@Articulo"
		  Dense="@true"
		  Hover="true"
		  Filter="new Func<Articulo,bool>(FilterFunc1)">
	<ToolBarContent>
		<MudTextField @bind-Value="searchStringFiltro"
					  Placeholder="Buscar..."
					  Adornment="Adornment.Start"
					  AdornmentIcon="@Icons.Material.Filled.Search"
					  IconSize="Size.Medium"
					  Class="mt-0">
		</MudTextField>
	</ToolBarContent>
	<HeaderContent>
		<MudTh>Nombre</MudTh>
		<MudTh>Descripción</MudTh>
		<MudTh>Precio Compra</MudTh>
		<MudTh>Precio Venta</MudTh>
		<MudTh></MudTh>
	</HeaderContent>
	<RowTemplate>
		<MudTd DataLabel="Nombre">@context.nvchNombre</MudTd>
		<MudTd DataLabel="Descripción">@context.nvchDescripcion</MudTd>
		<MudTd DataLabel="P Compra">@context.mPrecioCompra.ToString("C2")</MudTd>
		<MudTd DataLabel="P Venta">@context.mPrecioVenta.ToString("C2")</MudTd>
		<MudTd DataLabel="">
			<MudFab Color="Color.Primary" StartIcon="@Icons.Material.Filled.TouchApp" OnClick="@(()=>OnClickRow(context))" />
		</MudTd>
	</RowTemplate>
	<PagerContent>
		<MudTablePager />
	</PagerContent>
</MudTable>
@code {
	private string searchStringFiltro = "";
	private bool FilterFunc1(Articulo element) => FilterFunc(element, searchStringFiltro);
	private bool FilterFunc(Articulo element, string searchString)
	{
		if (string.IsNullOrWhiteSpace(searchString))
			return true;
		if (element.nvchNombre.Contains(searchString, StringComparison.OrdinalIgnoreCase)) // Agrega el campo por el cual realizar el filtro
			return true;
		if (element.nvchDescripcion.Contains(searchString, StringComparison.OrdinalIgnoreCase)) // Agrega el campo por el cual realizar el filtro
			return true;
		if (element.mPrecioVenta.ToString().Contains(searchString, StringComparison.OrdinalIgnoreCase)) // Agrega el campo por el cual realizar el filtro
			return true;
		return false;
	}
}


